-*- org -*-

#+TODO: TODO FIXME | DONE

* DONE Light-emitting objects
  Imitate them in the fragment shader by rendering at maximum color
  intensity.
* TODO Too short variables names for wobs, texture tiles and texture attribs.
  In fragment.glsl and render.lisp.
* TODO Physics
  - [ ] physics.lisp sketch
  - [ ] Bullet C wrapper
* TODO When signaling an error use appropriate conditions, not simple-error
* TODO Pass sun and ambient light to shaders via uniforms
* FIXME The camera viewable area
  Try this:
  (defparameter *sprite* (make-sprite 'sprite "~/doc/hovertank/hull"))
  (gobj :mv *sprite* (locat 64 64 32))
  (gobj :rot *sprite* 'z -10)
  (setq *camera-azimuth* 0)
  (setq *camera-tilt* 0)
  (setq *camera-location* (locat 64 63))

* TODO Experiment with CA voxel format and its transfer function
  CA format consists of two 1-byte components: Color and Alpha.  Color
  value is used to lookup RGB value of a voxel via the transfer
  function.  This format will reduce voxmaps sizes.

* TODO Volumetric collision detection
* TODO Scripting language
* FIXME The camera near plan at big zoom
* TODO io_voxels: multithreaded rasterization
  The first version didn't work because Is_Inside is not reentrant.
  Copy mesh for each thread if it possible.

* TODO Thread-local hooks
  Each thread should create its local hooks with gensyms as names and
  global variables such as *render-init-hook* will be removed.
* TODO io_voxels: voxelize polygonal models with textures
* TODO Because tile size is a constant we can make proxy geometry at
  compile time.  Generate vertexes for the render tile at location (0
  0 0), then move them to the required tile location in the vertex
  shader.
